- case @type
- when :xref
  - refid = (attr :refid) || @target
  a href=@target =(@text || @document.references[:ids].fetch(refid, "[#{refid}]")).tr_s("\n", ' ')
- when :ref
  a id=@target
- when :bibref
  a id=@target
  |[#{@target}]
- else
  a href=@target class=role target=(attr :window) data-preview-link=(bool_data_attr :preview)
    =@text
